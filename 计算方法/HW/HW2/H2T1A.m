clear, clcformat long%用于求MATLAB能支持的最大精度myeps = 1;while 1~=(1+myeps)myeps = myeps/2;endmyeps = myeps*2%输出最大精度%利用课本123页的算法：f = @(x) sin(cos(sin(cos(x))));  %积分函数a = -1; b = 1;                   %积分区间[a,b]tol = 1e-14;                     %误差控制精度n = 1;                              %初始分点数h = (b-a) / n;iteration = 1;                   %迭代次数T2 = GETTN(a,b,n);          %计算初始n分点的复化梯形积分，T2 = TnTRES = zeros(100);          %记录每次迭代的结果，用于作图TRES(iteration) = T2;T1=T2+100;while abs(T1-T2)>tol       T1 = T2;    H = h * sum(f(a + (2 * (1:n) - 1) * h / 2));    T2 = (T1 + H) / 2;    TRES(iteration) = T2;    h = h / 2;    n = n * 2;    iteration = iteration + 1;endTRES(iteration) = T2;I = T2; %用最后的积分结果来表示精确值fprintf('INF:分点数n=%d',n);semilogy((1:iteration),abs(TRES(1:iteration)-I),'--*');xlabel('迭代次数');ylabel('log R(x)');%%函数，输入a,b,n,计算复化梯形积分的值function T = GETTN(a,b,n)    f = @(x) sin(cos(sin(cos(x))));    h = (b-a)/n;    x = linspace(a,b,n+1);    T = h*(f(a)/2+f(b)/2+sum(f(x(2:end-1)))); 	%注意matlab下标从1开始 end